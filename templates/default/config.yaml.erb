// THIS FILE IS MANAGED BY CHEF !
// ALL CHANGES WILL BE LOST !




module.exports = {
  // Logging config
  loggingOpts: {
<% case node[:npmlazy][:conf][:logmethod]
   when 'file' %>
    logToConsole: false,
    logToFile: true,
<% when 'none' %>
    logToConsole: false,
    logToFile: false,
<% when 'both' %>
    logToConsole: true,
    logToFile: true,
<% else %> 
    logToConsole: true,
    logToFile: false,
<% end %>
    // This should be a file path.
    filename: '<%= File.join(node['npmlazy']['conf']['logdir'],'npm_lazy.log') %>'
  },

  // Cache config

  // `cacheDirectory`: Directory to store cached packages.
  //
  // Note: Since any relative path is resolved relative to the current working
  // directory when the server is started, you should use a full path.

  cacheDirectory: '<%= node['npmlazy']['conf']['cachedir'] %>',

  // `cacheAge`: maximum age before an index is refreshed from remoteUrl
  // - negative value means no refresh (e.g. once cached, never update the package.json metadata)
  // - zero means always refresh (e.g. always ask the registry for metadata)
  // - positive value means refresh every n milliseconds
  //   (e.g. 60 * 60 * 1000 = expire metadata every 60 minutes)
  //
  // Note: if you want to use `npm star` and other methods which update
  // npm metadata, you will need to set cacheAge to 0. npm generally wants the latest
  // package metadata version so caching package metadata will interfere with it.

  // Recommended setting: 0
  cacheAge: <%= node['npmlazy']['conf']['cacheage'] %>,

  // Request config

  // max milliseconds to wait for each HTTP response
  httpTimeout: <%= node['npmlazy']['conf']['httptimeout'] %>,
  // maximum number of retries per HTTP resource to get
  maxRetries: <%= node['npmlazy']['conf']['maxretries'] %>,
  // whether or not HTTPS requests are checked against Node's list of CAs
  // set false if you are using your own npm mirror with a self-signed SSL cert
  rejectUnauthorized: <%= node['npmlazy']['conf']['rejectunauthorized'] %>,

  // Remote and local URL

  // external url to npm_lazy, no trailing /
  externalUrl: '<%= node['npmlazy']['conf']['externalurl'] %>',
  // registry url with trailing /
  remoteUrl: '<%= node['npmlazy']['conf']['remoteurl'] %>',
  // bind port and host
  port: <%= node['npmlazy']['conf']['port'] %>,
  host: '<%= node['npmlazy']['conf']['host'] %>'
};

